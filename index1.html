<!DOCTYPE html>
<html>

<head>
    <title>mBERT Huggingface Model</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14"></script>
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>

<body>
    <div id="app">
        <div>
            <input type="text" v-model="userInput" placeholder="Enter your sentence here" />
            <button class="button" @click="fetchData">Fetch Tokens</button>
        </div>
        <div>
            <p v-for="(item, index) in responseData" :key="item.id">
                Token {{ index + 1 }}: {{ item.entity_group }}, {{ item.word }}
            </p>
        </div>
    </div>

    <script>

        new Vue({
            el: '#app',
            data: {
                userInput: '',
                responseData: [{ id: null, entity_group: null, word: null },
                { id: null, entity_group: null, word: null },
                { id: null, entity_group: null, word: null },
                { id: null, entity_group: null, word: null },
                { id: null, entity_group: null, word: null },
                { id: null, entity_group: null, word: null },
                { id: null, entity_group: null, word: null },
                ]
            },
            methods: {
                async fetchData() {
                    const data = { "inputs": this.userInput };

                    try {
                        const response = await fetch(
                            "https://api-inference.huggingface.co/models/tomaarsen/span-marker-mbert-base-multinerd",
                            {
                                headers: { Authorization: "Bearer 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" },
                                method: "POST",
                                body: JSON.stringify(data),
                            }
                        );

                        const result = await response.json();
                        for (let i = 0; i < Math.min(result.length, this.responseData.length); i++) {
                            this.responseData[i].id = i;
                            this.responseData[i].entity_group = result[i].entity_group;
                            this.responseData[i].word = result[i].word;
                        }

                        console.log("test")
                        console.log(result)
                        console.log(result[0].entity_group)
                        console.log(result[1].entity_group)
                        console.log(result[2].entity_group)

                        console.log(this.responseData[0].entity_group)
                        console.log(this.responseData[1].entity_group)
                        console.log(this.responseData[2].entity_group)

                    } catch (error) {
                        console.error("Error fetching data:", error);
                    }
                },
            },
        });
    </script>
</body>

</html>